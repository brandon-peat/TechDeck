<div class="flex full page">
    <div class="left-column">
        @if (isLoggedIn()) {
            <p-button styleClass="w-75" label="New Post" icon="pi pi-pencil" (click)="showNewPostForm()" />
        }
    </div>

    <div class="main-column">
        @if (showForm) {
            <form class="post-form row g-3" [formGroup]="newPostForm" (ngSubmit)="onSubmit()">
                <div class="col-md-10">
                    <textarea class="post-text" pInputTextarea formControlName="text" [autoResize]="true"></textarea>

                    @if (text.errors?.['required'] && text.touched) {
                        <p-messages [value]="[{severity: 'warn', detail: 'Your post body cannot be empty'}]" [closable]="false" />
                    }
                    @if (text.errors?.['maxlength'] && text.touched) {
                        <p-messages [value]="[{severity: 'warn', detail: 'Your post body cannot exceed 500 characters.'}]" [closable]="false" />
                    }
                </div>
                <div class="col-md-2">
                    <p-button class="post-button" label="Post" type="submit" icon="pi pi-comment" [disabled]="!newPostForm.valid" />
                </div>
            </form>
        }

        <timeline />

        <div>
            <p-toast />
        </div>
    </div>
</div>